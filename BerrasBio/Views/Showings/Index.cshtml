@model IEnumerable<BerrasBio.Models.Showing>

@{
    ViewData["Title"] = "Index";
}

<body class="moviePage">

    <h2>Movies today - @ViewData["DateToDay"]</h2>


    <table class="table">
        <thead>
            <tr>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["TimeSortParm"]">Start</a>
                </th>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["MovieTitleSortParm"]">Movie title</a>
                </th>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["TimespanSortParm"]">Timespan</a>
                </th>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["LoungeNameSortParm"]">Lounge</a>
                </th>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["LoungeNameSortParm"]">Seats</a>
                </th>
                <th>
                    <a asp-action="Index" asp-route-sortOrder="@ViewData["SeatsLeftSortParm"]">Seats left</a>
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")">
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.StartTime)</a> 
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.Movie.Title)</a>
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.Movie.TimeSpan)</a>
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.LoungeID)</a>
                        
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.Lounge.NrOfSeat)</a>
                        
                    </td>
                    <td>
                        <a asp-action="Details" asp-route-id="@item.ID" class="@(item.SeatsLeft > 0 ? "movieInfo" : "movieBooked")"> @Html.DisplayFor(modelItem => item.SeatsLeft)</a>
                        
                    </td>

                    <td>
                        @{var nrSeats = item.SeatsLeft;
                        }

                        @if (nrSeats > 0)
                        {
                            <a asp-action="Book" asp-route-id="@item.ID">Book</a>
                        }
                        <!-- |
                        <a asp-action="Details" asp-route-id="@item.ID">Details</a>

                        <a asp-action="Edit" asp-route-id="@item.ID">Edit</a> |
                        <a asp-action="Details" asp-route-id="@item.ID">Details</a> |
                        <a asp-action="Delete" asp-route-id="@item.ID">Delete</a>
                            -->

                    </td>
                </tr>
            }
        </tbody>
    </table>
    
    <div>
        <a asp-area="" asp-controller="Home" asp-action="Index">Back to Start Page</a>
        <!--
    <a asp-area="" asp-controller="Showing" asp-action="Home">Back to Start Page</a>
        -->

    </div>

    
</body>
